#!/usr/bin/env python

"""
This file acts offers services to interact with the custom library to move
sawyer to different states for the grabbing and throwing sequence
"""

# TODO: get default parameters from yaml file.

from __future__ import division
import numpy as np
import rospy

from the_mighty_sawyer import MoveArm

from std_srvs.srv import Empty, SetBool

class ServClient(object):

    def __init__(self):

        self.sawyer = MoveArm()

        rospy.Service('go_to_home_pos', Empty, self.home_pos_callback)
        rospy.Service('start_up', Empty, self.start_up_callback)
        rospy.Service('overhand_throw', Empty, self.overhand_callback)
        rospy.Service('actuate_gripper', SetBool, self.actuate_gripper_callback)

    def start_up_callback(self):
        sawyer.initializaton()

    def home_pos_callback(self):
        sawyer.go_to_home_pos()

    def overhand_callback(self):
        sawyer.do_over_hand_toss()

    def actuate_gripper_callback(self, data):
        sawyer.actuate_gripper(data)

def main():

    rospy.init_node('sawyer_movement_server')

    ServClient()

    rospy.spin()

if __name__ == '__main__':
    try:
        main()
    except rospy.ROSInterruptException:
        pass
